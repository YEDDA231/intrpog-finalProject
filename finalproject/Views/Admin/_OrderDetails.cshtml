@model finalproject.Models.Order

<div class="row">
    <div class="col-12">
        <div class="mb-4">
            <h6 class="text-muted mb-2">Order Number</h6>
            <p class="mb-0 fw-bold">#@Model.Id</p>
        </div>

        <div class="mb-4">
            <h6 class="text-muted mb-2">Customer</h6>
            <p class="mb-0">@(Model.User?.Email ?? "N/A")</p>
        </div>

        <div class="mb-4">
            <h6 class="text-muted mb-2">Order Date</h6>
            <p class="mb-0">@Model.OrderDate.ToString("MMMM dd, yyyy 'at' hh:mm tt")</p>
        </div>

        <div class="mb-4">
            <h6 class="text-muted mb-2">Shipping Address</h6>
            <p class="mb-0">@Model.ShippingAddress</p>
        </div>

        <div class="mb-4">
            <h6 class="text-muted mb-2">Order Status</h6>
            @{
                var statusClass = Model.Status switch
                {
                    "Pending" => "bg-yellow",
                    "Processing" => "bg-blue",
                    "Shipped" => "bg-blue",
                    "Delivered" => "bg-green",
                    "Cancelled" => "bg-red",
                    _ => "bg-secondary"
                };
                var statusIcon = Model.Status switch
                {
                    "Pending" => "fa-clock",
                    "Processing" => "fa-cog",
                    "Shipped" => "fa-shipping-fast",
                    "Delivered" => "fa-check-circle",
                    "Cancelled" => "fa-times-circle",
                    _ => "fa-question"
                };
            }
            <span class="badge @statusClass fs-6 p-2">
                <i class="fas @statusIcon me-2"></i>@Model.Status
            </span>
        </div>

        <div class="mb-4">
            <h6 class="text-muted mb-3">Order Items</h6>
            <div class="table-responsive">
                <table class="table table-sm">
                    <thead>
                        <tr>
                            <th>Product</th>
                            <th>Price</th>
                            <th>Quantity</th>
                            <th>Subtotal</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model.OrderItems)
                        {
                            <tr>
                                <td>
                                    <div class="d-flex align-items-center">
                                        @if (item.Product != null)
                                        {
                                            <img src="@item.Product.ImagePath" alt="@item.Product.Name" 
                                                 class="rounded me-2" style="width: 50px; height: 50px; object-fit: cover;"
                                                 onerror="this.src='https://via.placeholder.com/50x50'">
                                            <div>
                                                <h6 class="mb-0" style="font-size: 0.9rem;">@item.Product.Name</h6>
                                                <small class="text-muted">@item.Product.Category</small>
                                            </div>
                                        }
                                        else
                                        {
                                            <span>Product #@item.ProductId</span>
                                        }
                                    </div>
                                </td>
                                <td>$@item.Price.ToString("F2")</td>
                                <td>@item.Quantity</td>
                                <td class="fw-bold">$@((item.Price * item.Quantity).ToString("F2"))</td>
                            </tr>
                        }
                    </tbody>
                    <tfoot>
                        <tr>
                            <th colspan="3" class="text-end">Total:</th>
                            <th>$@Model.TotalAmount.ToString("F2")</th>
                        </tr>
                    </tfoot>
                </table>
            </div>
        </div>
    </div>
</div>

